<%- include ('../partials/header') %>
<%- include ('../partials/menu') %>
<main>
  <% if (locals.message) { %>
    <div class="alert alert-<%- locals.error ? 'danger' : 'success' %>" role="alert">
        <%= message %>
    </div>
    <% } %>
  <div class="container text-center">
    <div class="row">
      <div class="col">
      </div>
      <div class="col-md-auto">
        <h1>Welcome, <%= username %></h1><!--EJS reference to Usernames-->
        <br>
        <br>
        <br>
        <br>
        
        <!-- Exercise History -->

        <h4> Recent Exercises and Weights: </h4>
        <br>
        <div class="card m-1 bg-white rounded">
          <div id = "chest_div">
            <br>
            <h6> Chest: </h6>
            <br>

            <!-- Chest Table -->
            <table class="table">
              <!-- TABLE HEADER -->
              <thead>
                <tr>
                  <th scope="col">Day</th>
                  <th scope="col">Exercise</th>
                  <th scope="col">Weight</th>
                  <th scope="col">Sets</th>
                  <th scope="col">Reps</th>
                </tr>
              </thead>
              <tbody>
              <% if (rows) { 
                var buttons = '';
                var i = 0;
                rows.forEach(function(item){
                  if (i < 5) { 

                    let day_t = (item.day).toString().substring(0, 10);

                    if(item.muscle == 'Chest'){ 
                      buttons += '<tr><th scope="col">' + day_t + '</th><td>' + 
                                  item.exercise + '</td><td>' + item.weight + '</td><td>' + 
                                  item.sets + '</td><td>' + item.reps + '</td></tr>';
                      i++; 
                    }
                  }
              }); %>
              <%- buttons %> 
              <% } %>
              </tbody>   
            </table>
          </div>

          <br>
        </div>
        <div class="card m-1 bg-white rounded">
          <div id = "back_div">
            <br>
            <h6> Back: </h6>
            <br>
            <!-- Back Table -->
                    <table class="table">
                      <thead>
                        <tr>
                          <th scope="col">Day</th>
                          <th scope="col">Exercise</th>
                          <th scope="col">Weight</th>
                          <th scope="col">Sets</th>
                          <th scope="col">Reps</th>
                        </tr>
                      </thead>
                      <tbody>
                        <% if (rows) { 
                        var buttons = '';
                        var i = 0;
                        rows.forEach(function(item){
                          if (i < 5) { 

                            let day_t = (item.day).toString().substring(0, 10);

                            if(item.muscle == 'Back'){ 
                              buttons += '<tr><th scope="col">' + day_t + '</th><td>' + 
                                          item.exercise + '</td><td>' + item.weight + '</td><td>' + 
                                          item.sets + '</td><td>' + item.reps + '</td></tr>';
                              i++; 
                            }
                          }
                      }); %>
                      <%- buttons %> 
                      <% } %>
                      </tbody>
                    </table>
          </div>

          <br>
        </div>
        <div class="card m-1 bg-white rounded">
          <div id = "arms_div">
            <br>
            <h6> Arms: </h6>
            <br>
            <!-- Arms Table -->
                    <table class="table">
                      <thead>
                        <tr>
                          <th scope="col">Day</th>
                          <th scope="col">Exercise</th>
                          <th scope="col">Weight</th>
                          <th scope="col">Sets</th>
                          <th scope="col">Reps</th>
                        </tr>
                      </thead>
                      <tbody>
                        <% if (rows) { 
                        var buttons = '';
                        var i = 0;
                        rows.forEach(function(item){
                          if (i < 5) { 

                            let day_t = (item.day).toString().substring(0, 10);

                            if(item.muscle == 'Arms'){ 
                              buttons += '<tr><th scope="col">' + day_t + '</th><td>' + 
                                          item.exercise + '</td><td>' + item.weight + '</td><td>' + 
                                          item.sets + '</td><td>' + item.reps + '</td></tr>';
                              i++; 
                            }
                          }
                      }); %>
                      <%- buttons %> 
                      <% } %>
                      </tbody>
                    </table>
          </div>

          <br>
        </div>
        <div class="card m-1 bg-white rounded">
          <div id = "shoulders_div">
            <br>
            <h6> Shoulders: </h6>
            <br>
            <!-- Shoulders Table -->
                    <table class="table">
                      <thead>
                        <tr>
                          <th scope="col">Day</th>
                          <th scope="col">Exercise</th>
                          <th scope="col">Weight</th>
                          <th scope="col">Sets</th>
                          <th scope="col">Reps</th>
                        </tr>
                      </thead>
                      <tbody>
                        <% if (rows) { 
                        var buttons = '';
                        var i = 0;
                        rows.forEach(function(item){
                          if (i < 5) { 

                            let day_t = (item.day).toString().substring(0, 10);

                            if(item.muscle == 'Shoulders'){ 
                              buttons += '<tr><th scope="col">' + day_t + '</th><td>' + 
                                          item.exercise + '</td><td>' + item.weight + '</td><td>' + 
                                          item.sets + '</td><td>' + item.reps + '</td></tr>';
                              i++; 
                            }
                          }
                      }); %>
                      <%- buttons %> 
                      <% } %>
                      </tbody>
                    </table>
          </div>
          
          <br>
        </div>
        <div class="card m-1 bg-white rounded">
          <div id = "legs_div">
            <br>
            <h6> Legs: </h6>
            <br>

              <!-- Legs Table -->
                    <table class="table">
                      <thead>
                        <tr>
                          <th scope="col">Day</th>
                          <th scope="col">Exercise</th>
                          <th scope="col">Weight</th>
                          <th scope="col">Sets</th>
                          <th scope="col">Reps</th>
                        </tr>
                      </thead>
                      <tbody>
                        <% if (rows) { 
                        var buttons = '';
                        var i = 0;
                        rows.forEach(function(item){
                          if (i < 5) { 

                            let day_t = (item.day).toString().substring(0, 10);

                            if(item.muscle == 'Legs'){ 
                              buttons += '<tr><th scope="col">' + day_t + '</th><td>' + 
                                          item.exercise + '</td><td>' + item.weight + '</td><td>' + 
                                          item.sets + '</td><td>' + item.reps + '</td></tr>';
                              i++; 
                            }
                          }
                      }); %>
                      <%- buttons %> 
                      <% } %>
                      </tbody>
                    </table>
          </div>

          <br>
        </div>
        <br>
      </div>
      <div class="col">
      </div>
    </div>
  </div>

  <script>
        document.getElementById("chest_div").style.outline = "thin solid #FFFFFF";
        document.getElementById("back_div").style.outline = "thin solid #FFFFFF";
        document.getElementById("arms_div").style.outline = "thin solid #FFFFFF";
        document.getElementById("shoulders_div").style.outline = "thin solid #FFFFFF";
        document.getElementById("legs_div").style.outline = "thin solid #FFFFFF";
    </script>

</main>

<%- include ('../partials/footer') %>